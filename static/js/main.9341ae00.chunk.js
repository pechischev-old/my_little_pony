(this.webpackJsonpmy_little_pony=this.webpackJsonpmy_little_pony||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e){e.exports=JSON.parse('[{"id":1,"name":"\u0418\u0443\u0430\u0440\u0440\u0430\u043a\u0432\u0430\u043a\u0441","color":1,"kind":1,"price":19.99,"isNew":false},{"id":2,"name":"\u0422\u0432\u0430\u0439\u043b\u0430\u0439\u0442","color":2,"kind":2,"price":9.55,"isNew":false},{"id":3,"name":"\u0414\u0436\u0435\u043a","color":3,"kind":3,"price":50.99,"isNew":false},{"id":4,"name":"\u041a\u043b\u0430\u0443\u0441","color":4,"kind":4,"price":70,"isNew":false},{"id":5,"name":"\u0418\u0443\u0430\u0440\u0440\u0430\u043a\u0432\u0430\u043a\u0441","color":1,"kind":1,"price":19.99,"isNew":false},{"id":6,"name":"\u0422\u0432\u0430\u0439\u043b\u0430\u0439\u0442","color":2,"kind":2,"price":9.55,"isNew":false},{"id":7,"name":"\u0414\u0436\u0435\u043a","color":3,"kind":3,"price":50.99,"isNew":false},{"id":8,"name":"\u041a\u043b\u0430\u0443\u0441","color":4,"kind":4,"price":70,"isNew":false},{"id":9,"name":"\u0418\u0443\u0430\u0440\u0440\u0430\u043a\u0432\u0430\u043a\u0441","color":1,"kind":1,"price":19.99,"isNew":false},{"id":10,"name":"\u0422\u0432\u0430\u0439\u043b\u0430\u0439\u0442","color":2,"kind":2,"price":9.55,"isNew":false},{"id":11,"name":"\u0414\u0436\u0435\u043a","color":3,"kind":3,"price":50.99,"isNew":false},{"id":12,"name":"\u041a\u043b\u0430\u0443\u0441","color":4,"kind":4,"price":70,"isNew":false},{"id":13,"name":"\u0418\u0443\u0430\u0440\u0440\u0430\u043a\u0432\u0430\u043a\u0441","color":1,"kind":1,"price":19.99,"isNew":false},{"id":14,"name":"\u0422\u0432\u0430\u0439\u043b\u0430\u0439\u0442","color":2,"kind":2,"price":9.55,"isNew":false},{"id":15,"name":"\u0414\u0436\u0435\u043a","color":3,"kind":3,"price":50.99,"isNew":false},{"id":16,"name":"\u041a\u043b\u0430\u0443\u0441","color":4,"kind":4,"price":70,"isNew":false},{"id":17,"name":"\u0418\u0443\u0430\u0440\u0440\u0430\u043a\u0432\u0430\u043a\u0441","color":1,"kind":1,"price":19.99,"isNew":false},{"id":18,"name":"\u0422\u0432\u0430\u0439\u043b\u0430\u0439\u0442","color":2,"kind":2,"price":9.55,"isNew":false},{"id":19,"name":"\u0414\u0436\u0435\u043a","color":3,"kind":3,"price":50.99,"isNew":false},{"id":20,"name":"\u041a\u043b\u0430\u0443\u0441","color":4,"kind":4,"price":70,"isNew":false},{"id":21,"name":"\u0418\u0443\u0430\u0440\u0440\u0430\u043a\u0432\u0430\u043a\u0441","color":1,"kind":1,"price":19.99,"isNew":false},{"id":22,"name":"\u0422\u0432\u0430\u0439\u043b\u0430\u0439\u0442","color":2,"kind":2,"price":9.55,"isNew":true},{"id":23,"name":"\u0414\u0436\u0435\u043a","color":3,"kind":3,"price":50.99,"isNew":true},{"id":24,"name":"\u041a\u043b\u0430\u0443\u0441","color":4,"kind":4,"price":70,"isNew":true}]')},function(e){e.exports=JSON.parse('[{"id":1,"title":"\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439"},{"id":2,"title":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439"},{"id":3,"title":"\u0411\u0435\u043b\u044b\u0439"},{"id":4,"title":"\u041a\u043e\u0440\u0438\u0447\u043d\u0435\u0432\u044b\u0439"},{"id":5,"title":"\u0420\u044b\u0436\u0438\u0439"}]')},function(e){e.exports=JSON.parse('[{"id":1,"title":"\u0415\u0434\u0438\u043d\u043e\u0440\u043e\u0433"},{"id":2,"title":"\u041b\u043e\u0448\u0430\u0434\u044c"},{"id":3,"title":"\u041f\u043e\u043d\u0438"},{"id":4,"title":"\u0421\u0442\u0440\u0430\u0443\u0441"}]')},function(e,t,n){"use strict";n.r(t);var a,i=n(0),l=n.n(i),r=n(7),c=n.n(r),o=(n(16),n(8)),s=n(1),m=n(4),u=n(6),d=function(e){var t=e.name,n=e.label,a=e.type,i=Object(u.a)(e,["name","label","type"]);return l.a.createElement("div",{className:"field range-field"},l.a.createElement("label",null,n),l.a.createElement(m.a,Object.assign({name:"".concat(t,".from"),type:a,component:"input",placeholder:"\u043e\u0442"},i)),l.a.createElement(m.a,Object.assign({name:"".concat(t,".to"),type:a,component:"input",placeholder:"\u0434\u043e"},i)))},f=function(e){var t=e.options,n=void 0===t?[]:t,a=e.name,i=e.label,r=e.placeholder,c=(e.type,Object(u.a)(e,["options","name","label","placeholder","type"]));return l.a.createElement("div",{className:"field select-field"},l.a.createElement("label",null,i),l.a.createElement(m.a,Object.assign({name:a,placeholder:r,component:"select"},c),l.a.createElement("option",{disabled:!0},r),n.map((function(e){var t=e.id,n=e.title;return l.a.createElement("option",{value:t,key:t},n)}))))},p=function(e){var t=e.name,n=e.values,a=void 0===n?[]:n,i=e.label;return l.a.createElement("div",{className:"field radio-field"},l.a.createElement("label",null,i),l.a.createElement("div",null,a.map((function(e,n){var a=e.value,i=e.label;return l.a.createElement("label",{key:n},l.a.createElement(m.a,{name:t,component:"input",type:"radio",value:a})," ",i)}))))},v=function(e){var t=e.colors,n=e.kinds,a=e.onSubmit;return l.a.createElement(m.b,{onSubmit:a,render:function(e){var a=e.handleSubmit,i=e.submitting,r=e.pristine,c=e.form;return l.a.createElement("form",{onSubmit:a},l.a.createElement(d,{label:"\u0426\u0435\u043d\u0430",name:"price",type:"number"}),l.a.createElement(f,{options:t,name:"color",label:"\u0426\u0432\u0435\u0442",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0446\u0432\u0435\u0442"}),l.a.createElement(f,{options:n,name:"kind",label:"\u0412\u0438\u0434",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434"}),l.a.createElement(p,{values:[{label:"\u0414\u0430",value:"1"},{label:"\u041d\u0435\u0442",value:"0"}],label:"\u041d\u043e\u0432\u0438\u043d\u043a\u0430",name:"isNew"}),l.a.createElement("div",null,l.a.createElement("button",{type:"submit",disabled:i||r},"\u041d\u0430\u0439\u0442\u0438"),l.a.createElement("button",{type:"button",onClick:function(){c.reset(),a()},disabled:i||r},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c")))}})},b=l.a.createContext({}),E=b.Provider,h=(n(17),function(e){var t=e.totalCount,n=e.step,a=e.onChangePage,r=Object(i.useState)(0),c=Object(s.a)(r,2),o=c[0],m=c[1];Object(i.useEffect)((function(){a(o)}));var u=0===o,d=Math.min(n+o,t)===t;return l.a.createElement("ul",{className:"pagination"},l.a.createElement("li",{className:"pagination__item",onClick:function(){u||m(0)},"data-disabled":u},"<<"),l.a.createElement("li",{className:"pagination__item",onClick:function(){u||m(Math.max(o-n,0))},"data-disabled":u},"<"),l.a.createElement("li",{className:"pagination__item",onClick:function(){d||m(o+n)},"data-disabled":d},">"),l.a.createElement("li",{className:"pagination__item",onClick:function(){if(!d){var e=Math.ceil(t/n),a=n*e;m(a===t?a-n:a)}},"data-disabled":d},">>"))}),k=(n(18),function(e){var t=e.items,n=e.render;return l.a.createElement("div",{className:"list"},t.map((function(e,t){return l.a.createElement("div",{className:"list__item",key:t},n(e))})))}),g=function(e){var t=e.item,n=t.name,a=t.isNew,i=t.color,r=t.price,c=t.kind,o=a?"\u041d\u043e\u0432\u044b\u0439":" ";return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",null,"\u0426\u0432\u0435\u0442 ",i),l.a.createElement("div",null,"\u0422\u0438\u043f ",c),l.a.createElement("div",null,"\u0426\u0435\u043d\u0430 ",r),l.a.createElement("div",null,o)),l.a.createElement("div",null,n))},O=(n(19),function(e){var t=e.visible,n=e.title,a=e.onClose,c=e.children,o=Object(i.useRef)(null);return Object(r.createPortal)(l.a.createElement("div",{className:"modal-layout","data-hidden":!t},l.a.createElement("div",{"aria-hidden":!0,onClick:a,className:"modal-layout__overlay"}),l.a.createElement("div",{className:"modal",ref:o},l.a.createElement("div",{className:"modal__header"},l.a.createElement("button",{className:"modal__close",onClick:a},"X")),n&&l.a.createElement("div",{className:"modal__title"},n),l.a.createElement("div",{className:"modal__content"},c))),document.body)});!function(e){e.NONE="none",e.NEGATIVE="negative",e.POSITIVE="positive",e.NEUTRAL="neutral"}(a||(a={}));n(20);var y=function(e){var t=e.title,n=void 0===t?"":t,l=e.type,r=void 0===l?a.NONE:l,c=e.isShow,o=e.changeShow;return i.createElement("div",{className:"alert","data-open":c,"data-type":r,onClick:o},i.createElement("span",null,n),i.createElement("div",{className:"icon"},"X"))},N=function(e){var t=e.filters,n=e.appendToBasket,a=Object(i.useContext)(b).catalogService,r=Object(i.useState)({items:[],count:0}),c=Object(s.a)(r,2),o=c[0],m=c[1],u=Object(i.useState)(0),d=Object(s.a)(u,2),f=d[0],p=d[1],v=o.items,E=o.count;return Object(i.useEffect)((function(){m(a.getListData({limit:20,page:f},t))}),[f,t]),l.a.createElement("div",{className:"catalog"},v.length?l.a.createElement(i.Fragment,null,l.a.createElement(k,{items:v,render:function(e){return l.a.createElement(i.Fragment,null,l.a.createElement(g,{item:e}),l.a.createElement("div",{onClick:function(){return n(e)}},l.a.createElement("strong",null,"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")))}}),l.a.createElement(h,{step:20,totalCount:E,onChangePage:p})):"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")},j=function(e){var t=e.removeFromBasket,n=e.items,a=Object(i.useState)(0),r=Object(s.a)(a,2),c=r[0],o=r[1],m=Object(i.useState)({items:n,count:0}),u=Object(s.a)(m,2),d=u[0],f=u[1];return Object(i.useEffect)((function(){f({items:n.slice(c,c+20),count:n.length})}),[c,n]),l.a.createElement("div",{className:"basket"},n.length?l.a.createElement(i.Fragment,null,l.a.createElement(k,{items:d.items,render:function(e){return l.a.createElement(i.Fragment,null,l.a.createElement(g,{item:e}),l.a.createElement("div",{onClick:function(){return t(e)}},"X"))}}),l.a.createElement(h,{step:20,totalCount:d.count,onChangePage:o})):l.a.createElement("div",null,"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"))},w=n(2),S=n(3),I=n(21),_=function(){function e(){Object(w.a)(this,e),this.items=[],this.items=I}return Object(S.a)(e,[{key:"matching",value:function(e,t){var n=this,a=e.limit,i=e.page,l=this.items.filter((function(e){return n.filterItems(e,t)}));return{items:l.slice(i,i+a),count:l.length}}},{key:"filterItems",value:function(e,t){var n=t||{},a=n.price,i=n.color,l=n.kind,r=n.isNew,c=a||{},o=c.from,s=void 0===o?0:o,m=c.to,u=void 0===m?1/0:m,d=+s<=e.price&&e.price<=+u,f=!i||+i===e.color,p=!l||+l===e.kind,v=!r||!!+r===e.isNew;return d&&f&&p&&v}}]),e}(),C=n(22),R=function(){function e(){Object(w.a)(this,e),this.items=[],this.items=C}return Object(S.a)(e,[{key:"getItems",value:function(){return this.items}},{key:"getItem",value:function(e){return this.items.find((function(t){return t.id===e}))}}]),e}(),T=n(23),A=function(){function e(){Object(w.a)(this,e),this.items=[],this.items=T}return Object(S.a)(e,[{key:"getItems",value:function(){return this.items}},{key:"getItem",value:function(e){return this.items.find((function(t){return t.id===e}))}}]),e}(),x=function(){function e(){Object(w.a)(this,e),this.items=[],this.load()}return Object(S.a)(e,[{key:"append",value:function(e){var t=e.id;this.getItem(t)||(this.items.push(e),this.save())}},{key:"remove",value:function(e){this.getItem(e)&&(this.items=this.items.filter((function(t){return t.id!==e})),this.save())}},{key:"removeAll",value:function(){this.items=[],this.save()}},{key:"getItems",value:function(){return this.items}},{key:"getItem",value:function(e){return this.items.find((function(t){return t.id===e}))}},{key:"save",value:function(){localStorage.setItem(e.STORAGE_KEY,JSON.stringify(this.items))}},{key:"load",value:function(){var t=localStorage.getItem(e.STORAGE_KEY);if(t)try{this.items=JSON.parse(t)}catch(n){console.error("Can`t load basket data"),this.items=[],localStorage.removeItem(e.STORAGE_KEY)}}}]),e}();x.STORAGE_KEY="shop_basket";var J=function(){function e(){Object(w.a)(this,e),this.repository=new x}return Object(S.a)(e,[{key:"append",value:function(e){this.repository.append(e)}},{key:"remove",value:function(e){this.repository.remove(e)}},{key:"clear",value:function(){this.repository.removeAll()}},{key:"getItems",value:function(){return this.repository.getItems()}}]),e}(),P=n(10),B=new(function(){function e(){Object(w.a)(this,e),this.catalogRepository=new _,this.colorRepository=new R,this.kindRepository=new A}return Object(S.a)(e,[{key:"getListData",value:function(e,t){var n=this,a=this.catalogRepository.matching(e,t),i=a.items;return{count:a.count,items:i.map((function(e){var t,a,i=e.color,l=(e.kind,Object(u.a)(e,["color","kind"]));return Object(P.a)({},l,{color:null===(t=n.colorRepository.getItem(i))||void 0===t?void 0:t.title,kind:null===(a=n.kindRepository.getItem(i))||void 0===a?void 0:a.title})}))}}},{key:"getColors",value:function(){return this.colorRepository.getItems()}},{key:"getKinds",value:function(){return this.kindRepository.getItems()}}]),e}()),F=new J;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement((function(){var e=Object(i.useState)({}),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(!1),m=Object(s.a)(c,2),u=m[0],d=m[1],f=Object(i.useState)(!1),p=Object(s.a)(f,2),b=p[0],h=p[1],k=Object(i.useState)(F.getItems()),g=Object(s.a)(k,2),w=g[0],S=g[1],I=Object(i.useState)(!0),_=Object(s.a)(I,2),C=_[0],R=_[1],T=Object(i.useState)(!1),A=Object(s.a)(T,2),x=A[0],J=A[1];Object(i.useEffect)((function(){window.onoffline=function(){return R(!1)},window.ononline=function(){return R(!0)}}),[]);var P=!!w.length;return l.a.createElement("div",{className:"App"},l.a.createElement(E,{value:{catalogService:B}},l.a.createElement("header",null,l.a.createElement("button",{disabled:!P,onClick:function(){return d(!0)}},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 ",w.length," \u0448\u0442."),l.a.createElement("button",{onClick:function(){return h(!0)}},"\u0424\u0438\u043b\u044c\u0442\u0440\u044b")),l.a.createElement(N,{filters:n,appendToBasket:function(e){F.append(e),S(Object(o.a)(F.getItems()))}}),l.a.createElement(O,{visible:u,onClose:function(){return d(!1)}},l.a.createElement(j,{items:w,removeFromBasket:function(e){F.remove(e.id),S(Object(o.a)(F.getItems()))}}),l.a.createElement("div",null,l.a.createElement("button",{disabled:!C||!P,onClick:function(){J(!0),F.clear(),S(Object(o.a)(F.getItems()))}},"\u041a\u0443\u043f\u0438\u0442\u044c"))),l.a.createElement(O,{visible:b,onClose:function(){return h(!1)}},l.a.createElement(v,{onSubmit:r,colors:B.getColors(),kinds:B.getKinds()})),l.a.createElement(y,{title:"\u041d\u0435\u0442 \u0441\u0435\u0442\u0438",type:a.NEGATIVE,isShow:!C}),l.a.createElement(y,{title:"\u0417\u0430\u043a\u0430\u0437 \u0441\u043e\u0437\u0434\u0430\u043d",type:a.POSITIVE,isShow:x,changeShow:function(){return J(!1)}})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[11,1,2]]]);
//# sourceMappingURL=main.9341ae00.chunk.js.map